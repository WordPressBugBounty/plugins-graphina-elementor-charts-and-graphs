class _{constructor(){this.tableHandlers={},this.init(),this.observer={}}init(){this.setUpTableHandler(),this.bindEventHandlers()}bindEventHandlers(){jQuery(window).on("elementor/frontend/init",this.handleElementorWidgetInit.bind(this)),jQuery(window).on("elementor/editor/init",this.handleElementorWidgetInit.bind(this))}handleElementorWidgetInit(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",t=>{const i=t.find(".graphina-jquery-data-table");i.length>0&&this.initializeTables(i)})}initializeTables(t){const i=t.data("chart_type");this.tableHandlers[i]&&this.tableHandlers[i](t)}setUpTableHandler(){this.tableHandlers={data_table_lite:t=>this.observeTableElement(t,"data_table_lite")}}observeTableElement(t,i){const e=t.data("element_id");gcfe_public_localize.view_port==="off"?(this.observer[e]||(this.observer[e]=new IntersectionObserver(d=>{d.forEach(l=>{l.isIntersecting&&(this.setupTable(jQuery(l.target),i),this.observer[e].unobserve(l.target))})},{threshold:.1})),this.observer[e].observe(t[0])):this.setupTable(t,i)}getDynamicData(t,i,e){let d=jQuery(`[data-element_id="${e}"]`).closest("[data-elementor-id]").data("elementor-id");return new Promise((l,n)=>{jQuery.ajax({url:gcfe_public_localize.ajaxurl,type:"POST",dataType:"json",data:{action:"get_jquery_datatable_data",nonce:gcfe_public_localize.table_nonce,chartType:"data_table_lite",post_id:d,element_id:e,series_count:0,settings:JSON.stringify(t),selected_field:[]},success:s=>{jQuery("#data_table_lite_loading_"+e).hide(),jQuery("#data_table_lite_no_data_"+e).hide(),l(s)},error:s=>{console.error("AJAX Error:",s),n(new Error("AJAX request failed."))}})})}async setupTable(t,i){const e=t.data("element_id");let d=t.data("chart_data");const l=t.data("extra_data"),n=t.data("settings");d.fnInitComplete=()=>{jQuery(".dataTables_scrollBody").css({overflow:"hidden",border:"0"}),jQuery(`#data_table_lite_${e} thead th`).addClass("all graphina-datatable-columns"),jQuery(`#data_table_lite_${e} tbody td`).addClass("graphina-datatable-tbody-td");const a=jQuery(".dataTables_scrollFoot");a.css("overflow","auto"),a.on("scroll",function(){jQuery(".dataTables_scrollBody").scrollLeft(jQuery(this).scrollLeft())})},d.rowCallback=function(a,r,o){o%2===0?jQuery(a).addClass("odd"):jQuery(a).addClass("even")};let s=jQuery(".data_table_lite_"+e).DataTable(d);if(l.is_dynamic_table){const a=await this.getDynamicData(n,l,e);let r={};a.data.body.length!==0&&a.data.header.length!==0?(r.data=a.data.body,r.columns=a.data.header,s.destroy(),jQuery("#data_table_lite_loading_"+e).hide(),s=jQuery("#data_table_lite_"+e).DataTable(r)):jQuery("#data_table_lite_loading_"+e).show()}else d.columns.length>0&&jQuery("#data_table_lite_loading_"+e).hide();l.table_footer&&jQuery(`#data_table_lite_${e}`).append("<tfoot><tr>"+d.columns.map(a=>`<th class=${l.header_class}>${a.title}</th>`).join("")+"</tr></tfoot>"),l.table_data_direct&&(s.destroy(),jQuery(".data_table_lite_"+e).DataTable(d))}}new _;
//# sourceMappingURL=data_table-X-mD1wrR.js.map
