{"version":3,"file":"data_table-Azi9j7YV.js","sources":["../assets/elementor/js/apex-chart/DataTable.js"],"sourcesContent":["// Class specifically for Data table\nexport default class DataTable {\n    constructor() {\n        this.tableHandlers = {};\n        this.init();\n    }\n\n    // Initialize the class by setting up handlers and events\n    init() {\n        this.setUpTableHandler();\n        this.bindEventHandlers();\n    }\n\n    // Bind event listeners\n    bindEventHandlers() {\n        jQuery(window).on('elementor/frontend/init', this.handleElementorWidgetInit.bind(this));\n        jQuery(window).on('elementor/editor/init', this.handleElementorWidgetInit.bind(this));\n    }\n\n\n    handleElementorWidgetInit() {\n        elementorFrontend.hooks.addAction('frontend/element_ready/widget', ($scope) => {\n            const chartElement = $scope.find('.graphina-jquery-data-table');\n            if (chartElement.length > 0) {\n                this.initializeTables(chartElement);\n            }\n        });\n    }\n\n    initializeTables(chartElement) {\n        const chartType = chartElement.data('chart_type');\n        if (this.tableHandlers[chartType]) {\n            this.tableHandlers[chartType](chartElement);\n        }\n    }\n\n\n\n    setUpTableHandler() {\n        this.tableHandlers = {\n            data_table_lite: (element) => this.observeTableElement(element, 'data_table_lite'),\n        };\n    }\n\n    // Setup IntersectionObserver to call setupTable when the element is in the viewport\n    observeTableElement(element, dataTableType) {\n        if (gcfe_public_localize.view_port === 'off') {\n            if (!this.observer) {\n                this.observer = new IntersectionObserver((entries) => {\n                    entries.forEach((entry) => {\n                        if (entry.isIntersecting) {\n                            // Element is in viewport; initialize the chart\n                            this.setupTable(jQuery(entry.target), dataTableType);\n                            // Stop observing the element after initializing the chart\n                            this.observer.unobserve(entry.target);\n                        }\n                    });\n                }, { threshold: 0.1 }); // Trigger when at least 10% of the element is visible\n            }\n            this.observer.observe(element[0]); // Start observing the chart element\n        } else {\n            this.setupTable(element, dataTableType);\n        }\n    }\n\n    getDynamicData(settings, extraData, elementId) {\n        \n        return new Promise((resolve, reject) => {\n            jQuery.ajax({\n                url: gcfe_public_localize.ajaxurl,\n                type: 'POST',\n                dataType: 'json',\n                data: {\n                    action      : 'get_jquery_datatable_data',\n                    nonce       : gcfe_public_localize.table_nonce,\n                    chartType   : 'data_table_lite',\n                    post_id     : extraData.current_post_id,\n                    element_id  : elementId,\n                    series_count: 0,\n                    settings    : settings,\n                    selected_field: []\n                },\n                success: (response) => {\n                    jQuery('#data_table_lite_loading_' + elementId).hide();\n                    jQuery('#data_table_lite_no_data_' + elementId).hide();\n                    resolve(response);\n                },\n                error: (error) => {\n                    console.error('AJAX Error:', error);\n                    reject(new Error('AJAX request failed.'));\n                },\n            });\n        });\n    }\n\n    async setupTable(element,dataTableType){\n        const element_id = element.data('element_id')\n        let chart_data = element.data('chart_data')\n        const extraData = element.data('extra_data');\n        const settings = element.data('settings');\n\n        chart_data.fnInitComplete = () => {\n            jQuery('.dataTables_scrollBody').css({\n                'overflow': 'hidden',\n                'border': '0'\n            });\n            jQuery(`#data_table_lite_${element_id} thead th`).addClass('all graphina-datatable-columns')\n\n            jQuery(`#data_table_lite_${element_id} tbody td`).addClass('graphina-datatable-tbody-td')\n\n            const tableScrollFoot = jQuery('.dataTables_scrollFoot');\n            // Enable TFOOT scroll bars\n            tableScrollFoot.css('overflow', 'auto');\n\n            // Sync TFOOT scrolling with TBODY\n            tableScrollFoot.on('scroll', function () {\n                jQuery('.dataTables_scrollBody').scrollLeft(jQuery(this).scrollLeft());\n            });\n        }\n        let datatable = jQuery('.data_table_lite_' + element_id).DataTable(chart_data);\n        if(extraData.is_dynamic_table){\n            const dynamicData = await this.getDynamicData(settings, extraData, element_id);\n            let dynamicTableData = {}\n            if(dynamicData.data.body.length !== 0 && dynamicData.data.header.length !== 0){\n                dynamicTableData.data = dynamicData.data.body;\n                dynamicTableData.columns = dynamicData.data.header;\n                datatable.destroy();\n                jQuery('#data_table_lite_loading_' + element_id).hide();\n                datatable = jQuery('#data_table_lite_' + element_id).DataTable(dynamicTableData);;\n            }else{\n                jQuery('#data_table_lite_loading_' + element_id).show();\n            }\n        }else{\n            if(chart_data.columns.length > 0){\n                jQuery('#data_table_lite_loading_' + element_id).hide();\n            }\n        }\n        if (extraData.table_footer) {\n            jQuery(`#data_table_lite_${element_id}`).append('<tfoot><tr>' + chart_data.columns.map(column => `<th>${column.title}</th>`).join('') + '</tr></tfoot>');\n        }\n        if (extraData.table_data_direct){\n            datatable.destroy()\n            jQuery('.data_table_lite_' + element_id).DataTable(chart_data);\n        }\n    }\n\n}\n// Initialize Data Table\nnew DataTable();\n"],"names":["DataTable","$scope","chartElement","chartType","element","dataTableType","entries","entry","settings","extraData","elementId","resolve","reject","response","error","element_id","chart_data","tableScrollFoot","datatable","dynamicData","dynamicTableData","column"],"mappings":"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"}