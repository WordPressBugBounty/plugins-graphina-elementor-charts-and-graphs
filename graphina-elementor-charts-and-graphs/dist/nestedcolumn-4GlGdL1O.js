import{G as n}from"./GraphinaApexChartBase-B0hQqMJh.js";class d extends n{constructor(){super(),this.observer=null,this.secondaryChart=[],this.secondaryChartData=[]}setUpChartsHandler(){this.chartHandlers={nested_column:t=>this.observeChartElement(t,"bar")}}observeChartElement(t,r){gcfe_public_localize.view_port==="off"?(this.observer||(this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&(this.setupChart(jQuery(a.target),r),this.observer.unobserve(a.target))})},{threshold:1})),this.observer.observe(t[0])):this.setupChart(t,r)}getChartOptions(t,r,e,a,s){return r==="nested_column"&&(t.plotOptions={bar:{distributed:!0,horizontal:!0,barHeight:"75%",dataLabels:{position:"bottom"}}},t.chart.id=`barYear-${s}`,t.chart.events={dataPointSelection:(o,i,c)=>{this.toggleSecondaryChartData(c.dataPointIndex,t,s)}},t.tooltip={x:{show:!0},y:{formatter:function(o){let i=0,c=e.chart_tooltip_prefix_val,h=e.chart_tooltip_postfix_val;return e.tooltip_formatter?c+new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen,{minimumFractionDigits:i,maximumFractionDigits:i}).format(o)+h:o}}},t.responsive=a),this.initSChart(s,t),t}updateSecondaryChartVisibility(t){const r=jQuery(`.nested_column-chart-two-${t}`)[0],e=jQuery(`.nested_column-chart-one-${t}`)[0];this.secondaryChartData.length===0?(r.classList.remove("active"),e.classList.remove("chart-quarter-activated"),jQuery(`.nested_column-chart-two-${t}`).hide()):(e.classList.add("chart-quarter-activated"),r.classList.add("active"),jQuery(`.nested_column-chart-two-${t}`).show())}initSChart(t,r){const e=jQuery(`.nested_column-chart-two-${t}`);this.secondaryChart[t]=new ApexCharts(e[0],e.data("second_chart_options")),this.secondaryChart[t].render(),jQuery(`.nested_column-chart-two-${t}`).hide()}toggleSecondaryChartData(t,r,e){const a=r.series[0].data[t],s=this.secondaryChartData.findIndex(o=>o.name===a.x);s===-1?this.secondaryChartData.push({name:a.x,data:a.quarters,color:a.color}):this.secondaryChartData.splice(s,1),this.updateSecondaryChartVisibility(e),this.secondaryChart[e]&&this.secondaryChart[e].updateSeries(this.secondaryChartData)}}new d;
//# sourceMappingURL=nestedcolumn-4GlGdL1O.js.map
