class o{constructor(){this.tableHandlers={},this.init(),this.observer={}}init(){this.setUpTableHandler(),this.bindEventHandlers()}bindEventHandlers(){jQuery(window).on("elementor/frontend/init",this.handleElementorWidgetInit.bind(this)),jQuery(window).on("elementor/editor/init",this.handleElementorWidgetInit.bind(this))}handleElementorWidgetInit(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",t=>{const a=t.find(".graphina-jquery-data-table");a.length>0&&this.initializeTables(a)})}initializeTables(t){const a=t.data("chart_type");this.tableHandlers[a]&&this.tableHandlers[a](t)}setUpTableHandler(){this.tableHandlers={data_table_lite:t=>this.observeTableElement(t,"data_table_lite")}}observeTableElement(t,a){const e=t.data("element_id");gcfe_public_localize.view_port==="off"?(this.observer[e]||(this.observer[e]=new IntersectionObserver(i=>{i.forEach(l=>{l.isIntersecting&&(this.setupTable(jQuery(l.target),a),this.observer[e].unobserve(l.target))})},{threshold:.1})),this.observer[e].observe(t[0])):this.setupTable(t,a)}getDynamicData(t,a,e){return new Promise((i,l)=>{jQuery.ajax({url:gcfe_public_localize.ajaxurl,type:"POST",dataType:"json",data:{action:"get_jquery_datatable_data",nonce:gcfe_public_localize.table_nonce,chartType:"data_table_lite",post_id:a.current_post_id,element_id:e,series_count:0,settings:t,selected_field:[]},success:d=>{jQuery("#data_table_lite_loading_"+e).hide(),jQuery("#data_table_lite_no_data_"+e).hide(),i(d)},error:d=>{console.error("AJAX Error:",d),l(new Error("AJAX request failed."))}})})}async setupTable(t,a){const e=t.data("element_id");let i=t.data("chart_data");const l=t.data("extra_data"),d=t.data("settings");i.fnInitComplete=()=>{jQuery(".dataTables_scrollBody").css({overflow:"hidden",border:"0"}),jQuery(`#data_table_lite_${e} thead th`).addClass("all graphina-datatable-columns"),jQuery(`#data_table_lite_${e} tbody td`).addClass("graphina-datatable-tbody-td");const r=jQuery(".dataTables_scrollFoot");r.css("overflow","auto"),r.on("scroll",function(){jQuery(".dataTables_scrollBody").scrollLeft(jQuery(this).scrollLeft())})};let s=jQuery(".data_table_lite_"+e).DataTable(i);if(l.is_dynamic_table){const r=await this.getDynamicData(d,l,e);let n={};r.data.body.length!==0&&r.data.header.length!==0?(n.data=r.data.body,n.columns=r.data.header,s.destroy(),jQuery("#data_table_lite_loading_"+e).hide(),s=jQuery("#data_table_lite_"+e).DataTable(n)):jQuery("#data_table_lite_loading_"+e).show()}else i.columns.length>0&&jQuery("#data_table_lite_loading_"+e).hide();l.table_footer&&jQuery(`#data_table_lite_${e}`).append("<tfoot><tr>"+i.columns.map(r=>`<th>${r.title}</th>`).join("")+"</tr></tfoot>"),l.table_data_direct&&(s.destroy(),jQuery(".data_table_lite_"+e).DataTable(i))}}new o;
//# sourceMappingURL=data_table-CsVpaOkN.js.map
