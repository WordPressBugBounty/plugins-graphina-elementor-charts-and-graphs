{"version":3,"file":"pie-zcutx0Oi.js","sources":["../assets/elementor/js/apex-chart/PieChart.js"],"sourcesContent":["import GraphinaApexChartBase from './GraphinaApexChartBase';\n\n// Child class specifically for Pie Charts\nexport default class PieChart extends GraphinaApexChartBase {\n    constructor() {\n        super();\n        this.observer = {}; // For IntersectionObserver\n    }\n\n    // Setup handlers for Pie chart type\n    setUpChartsHandler() {\n        this.chartHandlers = {\n            pie: (element) => this.observeChartElement(element, 'pie'),\n        };\n    }\n   \n\n    applyDataLabelFormatter(chartOptions,extraData,forminatorPercentage=false){\n        let datalabelPreFix = extraData.chart_datalabel_prefix ?? '';\n        let datalabelPostFix = extraData.chart_datalabel_postfix ?? '';\n        if (!chartOptions.dataLabels) {\n            chartOptions.dataLabels = {}; // Initialize dataLabels if it doesn't exist\n        } \n        if(extraData.chart_data_label_pointer){\n            chartOptions.plotOptions.pie.donut.labels.total.formatter = (w) => {\n                let total =   w.globals.seriesTotals.reduce((a, b) => {\n                    return a + b\n                }, 0) ;\n                total = this.formatNumber(total, extraData.chart_datalabel_decimals_in_float);\n                return datalabelPreFix + total + datalabelPostFix;\n            }\n            chartOptions.plotOptions.pie.donut.labels.value.formatter = (val) => {\n                // Get the total sum of all values in the series\n                val = this.formatNumber(val, extraData.chart_datalabel_decimals_in_float);\n                return datalabelPreFix + val + datalabelPostFix;\n            }\n            chartOptions.tooltip.y = {\n                formatter : (val ) => {\n                    return datalabelPreFix + this.formatNumber(val, extraData.chart_datalabel_decimals_in_float) + datalabelPostFix\n                }\n            };\n        }else{\n            chartOptions.tooltip.y = {\n                formatter : (val ) => {\n                    return datalabelPreFix + new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                        minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                        maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    }).format(val) + datalabelPostFix;\n                }\n            }\n            chartOptions.plotOptions.pie.donut.labels.value.formatter = (val) => {\n                // Get the total sum of all values in the series\n                val = new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                    minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                }).format(val);\n                return datalabelPreFix + val + datalabelPostFix;\n            }\n            chartOptions.plotOptions.pie.donut.labels.total.formatter = (w) => {\n                // Get the total sum of all values in the series\n                let total =   w.globals.seriesTotals.reduce((a, b) => {\n                    return a + b\n                }, 0) ;\n                total = new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                    minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                }).format(total);\n                return datalabelPreFix + total + datalabelPostFix;\n            };\n            \n        }\n\n        if(chartOptions.dataLabels){\n            chartOptions.dataLabels.formatter = (val,opts) => {\n                if(forminatorPercentage){\n                    let totals = opts.w.globals.seriesTotals.reduce((a, b) => {\n                        return  a + b;\n                    }, 0)\n                    val = new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                        minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                        maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    }).format(val/totals * 100)\n                }\n                if(extraData.chart_datalabels_format_showlabel){\n                let label = opts.w.globals.labels[opts.seriesIndex];\n                return label + \"-\" + datalabelPreFix + new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                    minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                }).format(val) + datalabelPostFix ;\n                }\n                return datalabelPreFix + new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                    minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                    maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                }).format(val) + \"%\"  + datalabelPostFix ;\n            }\n            if ( extraData.chart_datalabels_format_showValue) {\n                chartOptions.dataLabels.formatter = (val, opts) => {\n                    val = opts.w.globals.series[opts.seriesIndex]; \n                    if(extraData.chart_number_format_commas && !extraData.chart_data_label_pointer){\n                        val = new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                            minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                            maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                        }).format(val);\n                    }\n                    if (extraData.chart_data_label_pointer) {\n                        return datalabelPreFix + this.formatNumber(val, extraData.chart_datalabel_decimals_in_float) + datalabelPostFix;\n                        }\n                        if(extraData.chart_datalabels_format_showlabel){\n                            let label = opts.w.globals.labels[opts.seriesIndex];\n                            return label + \"-\" + datalabelPreFix + val + datalabelPostFix;\n                            }\n                    return datalabelPreFix + val + datalabelPostFix;\n                };\n            }\n        }\n    \n    }\n\n    // Apply legend tooltip formatting\n    applyLegendTooltip(chartOptions, extraData, chart_type) {\n    if (extraData.legend_show_series_value) {\n        const prefix = extraData.chart_legend_show_series_prefix === 'yes' ? (extraData.chart_datalabel_prefix ?? '') : '';\n        const postfix = extraData.chart_legend_show_series_postfix === 'yes' ? (extraData.chart_datalabel_postfix ?? '') : '';\n\n        chartOptions.legend.formatter = (seriesName, opts) => {\n            seriesName = decodeURIComponent(seriesName);\n            let value = opts.w.globals.series[opts.seriesIndex];\n\n            // Format number if needed\n            value = new Intl.NumberFormat(window.gcfe_public_localize.locale_with_hyphen, {\n                minimumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n                maximumFractionDigits: extraData.chart_datalabel_decimals_in_float,\n            }).format(value);\n\n            return `<div class=\"legend-info\"><span>${seriesName}</span>: ${prefix}${value}${postfix}</div>`;\n        };\n    }\n}\n\n    \n    getChartOptions(finalChartOptions, chartType, extraData, responsive_options, elementId) {\n        if (chartType === 'pie') {\n            finalChartOptions.labels = finalChartOptions.xaxis.categories\n             // Add loaded event to remove fixed height\n             finalChartOptions.chart.events = {\n                mounted: (chartContext, config) => {\n                    // More specific selector targeting only the chart container\n                    const chartElement = document.querySelector(`.graphina-elementor-chart[data-element_id=\"${elementId}\"]`);\n                    if (chartElement) {\n                        // Remove fixed height but keep min-height for proper rendering\n                        chartElement.style.height = '';\n                    }\n                },\n               \n            };\n        }\n        return finalChartOptions;\n    }\n}\n\n// Initialize PieChart\nwindow.graphinaPieChart = new PieChart();\n"],"names":["PieChart","GraphinaApexChartBase","element","chartOptions","extraData","forminatorPercentage","datalabelPreFix","datalabelPostFix","w","total","a","b","val","opts","totals","chart_type","prefix","postfix","seriesName","value","finalChartOptions","chartType","responsive_options","elementId","chartContext","config","chartElement"],"mappings":"wDAGe,MAAMA,UAAiBC,CAAsB,CACxD,aAAc,CACV,MAAO,EACP,KAAK,SAAW,EACxB,CAGI,oBAAqB,CACjB,KAAK,cAAgB,CACjB,IAAMC,GAAY,KAAK,oBAAoBA,EAAS,KAAK,CAC5D,CACT,CAGI,wBAAwBC,EAAaC,EAAUC,EAAqB,GAAM,CACtE,IAAIC,EAAkBF,EAAU,wBAA0B,GACtDG,EAAmBH,EAAU,yBAA2B,GACvDD,EAAa,aACdA,EAAa,WAAa,IAE3BC,EAAU,0BACTD,EAAa,YAAY,IAAI,MAAM,OAAO,MAAM,UAAaK,GAAM,CAC/D,IAAIC,EAAUD,EAAE,QAAQ,aAAa,OAAO,CAACE,EAAGC,IACrCD,EAAIC,EACZ,CAAC,EACJ,OAAAF,EAAQ,KAAK,aAAaA,EAAOL,EAAU,iCAAiC,EACrEE,EAAkBG,EAAQF,CACjD,EACYJ,EAAa,YAAY,IAAI,MAAM,OAAO,MAAM,UAAaS,IAEzDA,EAAM,KAAK,aAAaA,EAAKR,EAAU,iCAAiC,EACjEE,EAAkBM,EAAML,GAEnCJ,EAAa,QAAQ,EAAI,CACrB,UAAaS,GACFN,EAAkB,KAAK,aAAaM,EAAKR,EAAU,iCAAiC,EAAIG,CAEtG,IAEDJ,EAAa,QAAQ,EAAI,CACrB,UAAaS,GACFN,EAAkB,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CAC3F,sBAAuBF,EAAU,kCACjC,sBAAuBA,EAAU,iCACzD,CAAqB,EAAE,OAAOQ,CAAG,EAAIL,CAErC,EACYJ,EAAa,YAAY,IAAI,MAAM,OAAO,MAAM,UAAaS,IAEzDA,EAAM,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CACxE,sBAAuBR,EAAU,kCACjC,sBAAuBA,EAAU,iCACrD,CAAiB,EAAE,OAAOQ,CAAG,EACNN,EAAkBM,EAAML,GAEnCJ,EAAa,YAAY,IAAI,MAAM,OAAO,MAAM,UAAaK,GAAM,CAE/D,IAAIC,EAAUD,EAAE,QAAQ,aAAa,OAAO,CAACE,EAAGC,IACrCD,EAAIC,EACZ,CAAC,EACJ,OAAAF,EAAQ,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CAC1E,sBAAuBL,EAAU,kCACjC,sBAAuBA,EAAU,iCACrD,CAAiB,EAAE,OAAOK,CAAK,EACRH,EAAkBG,EAAQF,CACpC,GAIFJ,EAAa,aACZA,EAAa,WAAW,UAAY,CAACS,EAAIC,IAAS,CAC9C,GAAGR,EAAqB,CACpB,IAAIS,EAASD,EAAK,EAAE,QAAQ,aAAa,OAAO,CAACH,EAAGC,IACxCD,EAAIC,EACb,CAAC,EACJC,EAAM,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CACxE,sBAAuBR,EAAU,kCACjC,sBAAuBA,EAAU,iCACpC,CAAA,EAAE,OAAOQ,EAAIE,EAAS,GAAG,CAC9C,CACgB,OAAGV,EAAU,kCACDS,EAAK,EAAE,QAAQ,OAAOA,EAAK,WAAW,EACnC,IAAMP,EAAkB,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CACzG,sBAAuBF,EAAU,kCACjC,sBAAuBA,EAAU,iCACrD,CAAiB,EAAE,OAAOQ,CAAG,EAAIL,EAEVD,EAAkB,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CAC3F,sBAAuBF,EAAU,kCACjC,sBAAuBA,EAAU,iCACpC,CAAA,EAAE,OAAOQ,CAAG,EAAI,IAAOL,CACxC,EACiBH,EAAU,oCACXD,EAAa,WAAW,UAAY,CAACS,EAAKC,KACtCD,EAAMC,EAAK,EAAE,QAAQ,OAAOA,EAAK,WAAW,EACzCT,EAAU,4BAA8B,CAACA,EAAU,2BAClDQ,EAAM,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CACxE,sBAAuBR,EAAU,kCACjC,sBAAuBA,EAAU,iCAC7D,CAAyB,EAAE,OAAOQ,CAAG,GAEbR,EAAU,yBACHE,EAAkB,KAAK,aAAaM,EAAKR,EAAU,iCAAiC,EAAIG,EAE5FH,EAAU,kCACGS,EAAK,EAAE,QAAQ,OAAOA,EAAK,WAAW,EACnC,IAAMP,EAAkBM,EAAML,EAE9CD,EAAkBM,EAAML,IAKnD,CAGI,mBAAmBJ,EAAcC,EAAWW,EAAY,CACxD,GAAIX,EAAU,yBAA0B,CACpC,MAAMY,EAASZ,EAAU,kCAAoC,MAASA,EAAU,wBAA0B,GAAM,GAC1Ga,EAAUb,EAAU,mCAAqC,MAASA,EAAU,yBAA2B,GAAM,GAEnHD,EAAa,OAAO,UAAY,CAACe,EAAYL,IAAS,CAClDK,EAAa,mBAAmBA,CAAU,EAC1C,IAAIC,EAAQN,EAAK,EAAE,QAAQ,OAAOA,EAAK,WAAW,EAGlD,OAAAM,EAAQ,IAAI,KAAK,aAAa,OAAO,qBAAqB,mBAAoB,CAC1E,sBAAuBf,EAAU,kCACjC,sBAAuBA,EAAU,iCACjD,CAAa,EAAE,OAAOe,CAAK,EAER,kCAAkCD,CAAU,YAAYF,CAAM,GAAGG,CAAK,GAAGF,CAAO,QAC1F,CACT,CACA,CAGI,gBAAgBG,EAAmBC,EAAWjB,EAAWkB,EAAoBC,EAAW,CACpF,OAAIF,IAAc,QACdD,EAAkB,OAASA,EAAkB,MAAM,WAElDA,EAAkB,MAAM,OAAS,CAC9B,QAAS,CAACI,EAAcC,IAAW,CAE/B,MAAMC,EAAe,SAAS,cAAc,8CAA8CH,CAAS,IAAI,EACnGG,IAEAA,EAAa,MAAM,OAAS,GAEnC,CAEJ,GAEEN,CACf,CACA,CAGA,OAAO,iBAAmB,IAAIpB"}