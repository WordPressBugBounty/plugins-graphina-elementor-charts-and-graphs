{"version":3,"file":"publicMain.js","sources":["../assets/js/graphina-public.js","../assets/js/public-main.js"],"sourcesContent":["export default class GraphinaPublic {\n\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.eventHandlers();\n        this.graphinaFeatureRequest();\n    }\n\n    eventHandlers() {\n        jQuery(document.body).on('submit', '.graphina-password-restricted-form', this.handleChartAccess.bind(this));\n    }\n\n    graphinaFeatureRequest(){\n        // Graphina Feature Request For Elementor Panel\n        if (parent.document.querySelector('.elementor-editor-active') !== null) {\n            let _graphina_get_help = '';\n            let _graphina_get_help_url = \"https://iqonic.design/feature-request/?for_product=graphina\";\n            setInterval(function() {\n                if (parent.document.querySelector('[class*=elementor-control-iq]') != null) {\n                    _graphina_get_help = parent.document.querySelector('#elementor-panel__editor__help__link');\n                    if (_graphina_get_help != null) {\n                        if (_graphina_get_help.getAttribute(\"href\") !== _graphina_get_help_url) {\n                            _graphina_get_help.setAttribute(\"href\", _graphina_get_help_url);\n                            _graphina_get_help.innerHTML = \"<b> Graphina Feature Request <i class='eicon-editor-external-link'></i> </b>\";\n                        }\n                    }\n                }\n            }, 3000)\n        }\n    }\n\n    handleChartAccess(e) {\n        e.preventDefault(); // Prevent the form's default submission behavior\n\n        // Create FormData object from the form and convert it to a plain object\n        const formData = new FormData(e.currentTarget);\n        const jsonData = Object.fromEntries(formData.entries());\n    \n        // Prepare data for the AJAX request in a more structured way\n        const ajaxData = {\n            chart_password: jsonData.chart_password,\n            chart_type: jsonData.chart_type,\n            chart_id: jsonData.chart_id,\n            nonce: jsonData.nonce,\n            action: jsonData.action,\n            graphina_password: jsonData.graphina_password\n        };\n\n        // Send the Ajax request using jQuery\n        jQuery.ajax({\n            type: 'GET',\n            url: gcfe_public_localize.ajaxurl,\n            data: ajaxData, // Use the structured ajaxData\n            dataType: \"json\",\n            contentType: \"application/json\",\n            success: function(response) {\n                if (response.status === true) {\n                    this.graphinasetCookie(response.chart, true, 1);\n                    location.reload();\n                }else{\n                    jQuery(e.currentTarget).find('.elementor-alert-danger').show()\n                }\n            }.bind(this),\n            error: function(xhr, status, error) {\n                // Handle the error\n                console.error('Ajax Request Failed:', status, error);\n            }\n        });\n    }\n\n\n    graphinasetCookie(cname, cvalue, exdays) {\n        var d = new Date();\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n        var expires = \"expires=\" + d.toUTCString();\n        document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n    }\n}\n","import GraphinaPublic from './graphina-public';\njQuery(function () {\n\n    \n    const GraphinaPublicMain = {\n        'GraphinaPublic' : new GraphinaPublic(),\n    };\n    \n    window['GraphinaPublicMain'] = GraphinaPublicMain;\n\n})"],"names":["GraphinaPublic","_graphina_get_help","_graphina_get_help_url","formData","jsonData","ajaxData","response","xhr","status","error","cname","cvalue","exdays","d","expires","GraphinaPublicMain"],"mappings":"AAAe,MAAMA,CAAe,CAEhC,aAAc,CACV,KAAK,KAAI,CACb,CAEA,MAAO,CACH,KAAK,cAAa,EAClB,KAAK,uBAAsB,CAC/B,CAEA,eAAgB,CACZ,OAAO,SAAS,IAAI,EAAE,GAAG,SAAU,qCAAsC,KAAK,kBAAkB,KAAK,IAAI,CAAC,CAC9G,CAEA,wBAAwB,CAEpB,GAAI,OAAO,SAAS,cAAc,0BAA0B,IAAM,KAAM,CACpE,IAAIC,EAAqB,GACrBC,EAAyB,8DAC7B,YAAY,UAAW,CACf,OAAO,SAAS,cAAc,+BAA+B,GAAK,OAClED,EAAqB,OAAO,SAAS,cAAc,sCAAsC,EACrFA,GAAsB,MAClBA,EAAmB,aAAa,MAAM,IAAMC,IAC5CD,EAAmB,aAAa,OAAQC,CAAsB,EAC9DD,EAAmB,UAAY,gFAI/C,EAAG,GAAI,CACX,CACJ,CAEA,kBAAkB,EAAG,CACjB,EAAE,eAAc,EAGhB,MAAME,EAAW,IAAI,SAAS,EAAE,aAAa,EACvCC,EAAW,OAAO,YAAYD,EAAS,QAAO,CAAE,EAGhDE,EAAW,CACb,eAAgBD,EAAS,eACzB,WAAYA,EAAS,WACrB,SAAUA,EAAS,SACnB,MAAOA,EAAS,MAChB,OAAQA,EAAS,OACjB,kBAAmBA,EAAS,iBACxC,EAGQ,OAAO,KAAK,CACR,KAAM,MACN,IAAK,qBAAqB,QAC1B,KAAMC,EACN,SAAU,OACV,YAAa,mBACb,SAAS,SAASC,EAAU,CACpBA,EAAS,SAAW,IACpB,KAAK,kBAAkBA,EAAS,MAAO,GAAM,CAAC,EAC9C,SAAS,OAAM,GAEf,OAAO,EAAE,aAAa,EAAE,KAAK,yBAAyB,EAAE,KAAI,CAEpE,GAAE,KAAK,IAAI,EACX,MAAO,SAASC,EAAKC,EAAQC,EAAO,CAEhC,QAAQ,MAAM,uBAAwBD,EAAQC,CAAK,CACvD,CACZ,CAAS,CACL,CAGA,kBAAkBC,EAAOC,EAAQC,EAAQ,CACrC,IAAIC,EAAI,IAAI,KACZA,EAAE,QAAQA,EAAE,QAAO,EAAMD,EAAS,GAAK,GAAK,GAAK,GAAK,EACtD,IAAIE,EAAU,WAAaD,EAAE,YAAW,EACxC,SAAS,OAASH,EAAQ,IAAMC,EAAS,IAAMG,EAAU,SAC7D,CACJ,CC/EA,OAAO,UAAY,CAGf,MAAMC,EAAqB,CACvB,eAAmB,IAAIf,CAC/B,EAEI,OAAO,mBAAwBe,CAEnC,CAAC"}