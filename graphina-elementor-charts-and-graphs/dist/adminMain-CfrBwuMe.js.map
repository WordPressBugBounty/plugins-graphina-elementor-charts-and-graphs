{"version":3,"file":"adminMain-CfrBwuMe.js","sources":["../assets/admin/js/Graphina_Admin_Dashboard.js","../assets/admin/js/main.js"],"sourcesContent":["export default class Graphina_Admin_Dashboard{\n    \n    constructor(){\n        this.init()\n    }\n\n    init(){\n        this.eventHandlers();\n        this.getDisabledWidget();\n    }\n\n    eventHandlers() {\n        jQuery(document.body)\n            .on('click', '.graphina-notice .notice-dismiss', this.handleIqonicNotice.bind(this))\n            .on('click', '#graphina_setting_save_button', this.handleSettingSave.bind(this))\n            .on('click', '#graphina_database_save_button', this.handleDatabaseSave.bind(this))\n            .on('click', '#graphina-database-delete', this.handleDatabaseDelete.bind(this))\n            .on('click', '#graphina_test_db_btn', this.handleDatabaseTest.bind(this))\n            .on('change', '#enable_chart_filter', this.handleLoaderDisplay.bind(this))\n            .on('click', '#graphina_upload_loader', this.handleLoaderUpload.bind(this))\n            // Enable all toggles\n            .on('click', '.graphina-enable-all-apex-chart', this.debounce(this.handleEnableAllChart.bind(this), 300))\n            // Disable all toggles\n            .on('click', '.graphina-disable-all-apex-chart', this.debounce(this.handleDisableAllChart.bind(this), 300))\n            // Enable specific toggles\n            .on('click', '.graphina-apex-toggle', this.debounce(this.handleDisableChart.bind(this), 300))\n            // Chart type switching\n            .on('click', '.graphina-chart-type', this.handleChartTypeSwitch.bind(this))\n    }\n\n    debounce = (func, delay) => {\n        let timer;\n        return (...args) => {\n            clearTimeout(timer);\n            timer = setTimeout(() => func.apply(this, args), delay);\n        };\n    };\n\n    handleIqonicNotice(e){\n        e.preventDefault()\n        let key = jQuery('.graphina-notice #graphina-notice-id').val();\n        let nounce = jQuery('.graphina-notice #graphina-notice-nounce').val();\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"GET\",\n            data: {\n                action: 'graphina_dismiss_notice',\n                nounce: nounce,\n                key: key\n            }\n        })\n        \n    }\n\n    getDisabledWidget(){\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"GET\",\n            data: {\n                action: 'graphina_get_disabled_widgets',\n            },\n            success: function (response) {\n                document.querySelectorAll('.graphina-apex-toggle').forEach(label => {\n                    // Get the value of the \"data-widget\" attribute\n                    const widgetData = JSON.parse(label.getAttribute('data-widget'));\n                    // Check if the \"data-widget\" value matches `[\"area_chart\"]`\n                    if (response.data.includes(widgetData[0])) {\n                        // Find the input element inside the label and uncheck it\n                        const input = label.querySelector('input[type=\"checkbox\"]');\n                        if (input) {\n                            input.checked = false;\n                        }\n                    }\n                });\n                jQuery('.graphina-admin-loader').hide()\n                jQuery('#graphina-apex-chart').show()\n                jQuery('#graphina-google-chart').show()\n                jQuery('#graphina-table').show()\n                if(gcfe_localize.pro_active == '0'){\n                    jQuery('#graphina-pro-elements').show()\n                }\n            }\n        })\n    }\n    handleDisableChart(e){\n        e.preventDefault();\n\n        var action = 'graphina_save_enabled_widgets'\n        let checkbox = jQuery(e.currentTarget).find('input');\n        let isChecked = checkbox.prop('checked'); \n        if(!isChecked){\n            action = 'graphina_save_disabled_widgets'\n            jQuery(e.currentTarget).find('input').prop('checked',false)\n        }else{\n            jQuery(e.currentTarget).find('input').prop('checked', true)\n        }\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: {\n                action: action,\n                widgets: JSON.stringify(jQuery(e.currentTarget).data('widget'))\n            },\n            success: function (response) {\n                alert(response.data.message + \"\\n\" + response.data.subMessage);\n            }\n        })\n    }\n\n    handleEnableAllChart(e) {\n        e.preventDefault();\n        jQuery('.toggle input').prop('checked', true);\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: {\n                action: 'graphina_save_enabled_widgets',\n                widgets: 1\n            },\n            success: function (response) {\n                alert(response.data.message + \"\\n\" + response.data.subMessage);\n            }\n        })\n    }\n\n    handleDisableAllChart(e) {\n        e.preventDefault();\n        jQuery('.toggle input').prop('checked', false);\n\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: {\n                action: 'graphina_save_disabled_widgets',\n                widgets: 1\n            },\n            success: function (response) {\n                alert(response.data.message + \"\\n\" + response.data.subMessage);\n            }\n        })\n    }\n\n    handleChartTypeSwitch(e) {\n        e.preventDefault();\n        const clickedType = jQuery(e.currentTarget);\n\n        // Remove 'active' class from all chart types and add it to the clicked one\n        jQuery('.graphina-chart-type').removeClass('active');\n        clickedType.addClass('active');\n    }\n\n    handleDatabaseDelete(e) {\n        e.preventDefault();\n        const __this = jQuery(e.currentTarget);\n        let selected_value = __this.attr(\"data-selected\");\n    \n        if (confirm(gcfe_localize.i18n.swal_are_you_sure_text + \"\\n\" + gcfe_localize.i18n.swal_revert_this_text)) {\n            jQuery.ajax({\n                url: gcfe_localize.ajaxurl,\n                type: \"POST\",\n                data: {\n                    action: 'graphina_external_database',\n                    type: 'delete',\n                    value: selected_value,\n                    nonce: gcfe_localize.nonce\n                },\n                success: function (response) {\n                    if (response.status === true || response.status === 'true') {\n                        window.location.reload();\n                    } else {\n                        alert(response.message);\n                    }\n                }\n            });\n        }\n    }    \n\n    handleDatabaseTest(e) {\n        e.preventDefault();\n        jQuery(document).find('#graphina_external_database_action_type').val('con_test')\n        jQuery(e.currentTarget).text('Connecting...')\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: jQuery('#graphina-settings-db-tab').serialize(),\n            success: function (response) {\n                jQuery(e.currentTarget).text('Test DB Setting ')\n                alert(response.message + \"\\n\" + response.subMessage);\n                window.location.reload();                \n            }\n        })\n    }\n\n    handleDatabaseSave(e){\n        e.preventDefault()\n        if(jQuery(document).find('#graphina_external_database_action_type').val() == 'con_test'){\n            jQuery(document).find('#graphina_external_database_action_type').val('save')\n        }\n        jQuery(e.currentTarget).text('Connecting...')\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: jQuery('#graphina-settings-db-tab').serialize(),\n            success: function (response) {\n                jQuery(e.currentTarget).text('Save Setting')\n                alert(response.message + \"\\n\" + response.subMessage);\n                window.location.reload();\n            }\n        })\n    }\n\n    handleLoaderUpload(e) {\n        e.preventDefault();\n        const frame = wp.media({\n            title: 'Select or Upload Media',\n            button: { text: 'Use this media' },\n            multiple: false,\n        });\n\n        frame.on('select', () => {\n            const attachment = frame.state().get('selection').first().toJSON();\n            jQuery('#graphina_loader_hidden').val(attachment.url);\n            jQuery('.graphina_upload_image_preview').attr('src', attachment.url);\n        });\n\n        frame.open();\n    }\n\n    handleLoaderDisplay(e) {\n        e.preventDefault();\n        const isChecked = jQuery(e.currentTarget).is(':checked');\n        jQuery('#chart_filter_div').toggleClass('graphina-d-none', !isChecked);\n    }\n\n    handleSettingSave(e){\n        e.preventDefault()\n\n        jQuery.ajax({\n            url: gcfe_localize.ajaxurl,\n            type: \"POST\",\n            data: jQuery('#graphina_settings_tab').serialize(),\n            success: function (response) {\n                if (response.status === true || response.status === 'true') {\n                    alert(response.message + \"\\n\" + response.subMessage);\n                } else {\n                    alert(response.message);\n                }\n            }\n        })\n    }\n\n} \n","import Graphina_Admin_Dashboard from './Graphina_Admin_Dashboard'\njQuery(function () {\n    const GraphinaModule = {\n        'Graphina_Admin_Dashboard' : new Graphina_Admin_Dashboard(),\n    }\n    window['GraphinaModule'] = GraphinaModule\n})"],"names":["Graphina_Admin_Dashboard","__publicField","func","delay","timer","args","key","nounce","response","label","widgetData","input","action","clickedType","selected_value","frame","attachment","isChecked","GraphinaModule"],"mappings":"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"}