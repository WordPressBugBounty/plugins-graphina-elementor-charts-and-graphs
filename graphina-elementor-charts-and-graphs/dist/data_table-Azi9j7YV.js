class o{constructor(){this.tableHandlers={},this.init()}init(){this.setUpTableHandler(),this.bindEventHandlers()}bindEventHandlers(){jQuery(window).on("elementor/frontend/init",this.handleElementorWidgetInit.bind(this)),jQuery(window).on("elementor/editor/init",this.handleElementorWidgetInit.bind(this))}handleElementorWidgetInit(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",e=>{const a=e.find(".graphina-jquery-data-table");a.length>0&&this.initializeTables(a)})}initializeTables(e){const a=e.data("chart_type");this.tableHandlers[a]&&this.tableHandlers[a](e)}setUpTableHandler(){this.tableHandlers={data_table_lite:e=>this.observeTableElement(e,"data_table_lite")}}observeTableElement(e,a){gcfe_public_localize.view_port==="off"?(this.observer||(this.observer=new IntersectionObserver(t=>{t.forEach(l=>{l.isIntersecting&&(this.setupTable(jQuery(l.target),a),this.observer.unobserve(l.target))})},{threshold:.1})),this.observer.observe(e[0])):this.setupTable(e,a)}getDynamicData(e,a,t){return new Promise((l,r)=>{jQuery.ajax({url:gcfe_public_localize.ajaxurl,type:"POST",dataType:"json",data:{action:"get_jquery_datatable_data",nonce:gcfe_public_localize.table_nonce,chartType:"data_table_lite",post_id:a.current_post_id,element_id:t,series_count:0,settings:e,selected_field:[]},success:d=>{jQuery("#data_table_lite_loading_"+t).hide(),jQuery("#data_table_lite_no_data_"+t).hide(),l(d)},error:d=>{console.error("AJAX Error:",d),r(new Error("AJAX request failed."))}})})}async setupTable(e,a){const t=e.data("element_id");let l=e.data("chart_data");const r=e.data("extra_data"),d=e.data("settings");l.fnInitComplete=()=>{jQuery(".dataTables_scrollBody").css({overflow:"hidden",border:"0"}),jQuery(`#data_table_lite_${t} thead th`).addClass("all graphina-datatable-columns"),jQuery(`#data_table_lite_${t} tbody td`).addClass("graphina-datatable-tbody-td");const i=jQuery(".dataTables_scrollFoot");i.css("overflow","auto"),i.on("scroll",function(){jQuery(".dataTables_scrollBody").scrollLeft(jQuery(this).scrollLeft())})};let s=jQuery(".data_table_lite_"+t).DataTable(l);if(r.is_dynamic_table){const i=await this.getDynamicData(d,r,t);let n={};i.data.body.length!==0&&i.data.header.length!==0?(n.data=i.data.body,n.columns=i.data.header,s.destroy(),jQuery("#data_table_lite_loading_"+t).hide(),s=jQuery("#data_table_lite_"+t).DataTable(n)):jQuery("#data_table_lite_loading_"+t).show()}else l.columns.length>0&&jQuery("#data_table_lite_loading_"+t).hide();r.table_footer&&jQuery(`#data_table_lite_${t}`).append("<tfoot><tr>"+l.columns.map(i=>`<th>${i.title}</th>`).join("")+"</tr></tfoot>"),r.table_data_direct&&(s.destroy(),jQuery(".data_table_lite_"+t).DataTable(l))}}new o;
//# sourceMappingURL=data_table-Azi9j7YV.js.map
