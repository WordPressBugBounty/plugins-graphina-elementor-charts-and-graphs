var s=Object.defineProperty;var c=(n,e,a)=>e in n?s(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var l=(n,e,a)=>c(n,typeof e!="symbol"?e+"":e,a);class d{constructor(){l(this,"debounce",(e,a)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>e.apply(this,i),a)}});this.init()}init(){this.eventHandlers(),this.getDisabledWidget()}eventHandlers(){jQuery(document.body).on("click",".graphina-notice .notice-dismiss",this.handleIqonicNotice.bind(this)).on("click","#graphina_setting_save_button",this.handleSettingSave.bind(this)).on("click","#graphina_database_save_button",this.handleDatabaseSave.bind(this)).on("click","#graphina-database-delete",this.handleDatabaseDelete.bind(this)).on("click","#graphina_test_db_btn",this.handleDatabaseTest.bind(this)).on("change","#enable_chart_filter",this.handleLoaderDisplay.bind(this)).on("click","#graphina_upload_loader",this.handleLoaderUpload.bind(this)).on("click",".graphina-enable-all-apex-chart",this.debounce(this.handleEnableAllChart.bind(this),300)).on("click",".graphina-disable-all-apex-chart",this.debounce(this.handleDisableAllChart.bind(this),300)).on("click",".graphina-apex-toggle",this.debounce(this.handleDisableChart.bind(this),300)).on("click",".graphina-chart-type",this.handleChartTypeSwitch.bind(this))}handleIqonicNotice(e){e.preventDefault();let a=jQuery(".graphina-notice #graphina-notice-id").val(),t=jQuery(".graphina-notice #graphina-notice-nounce").val();jQuery.ajax({url:gcfe_localize.ajaxurl,type:"GET",data:{action:"graphina_dismiss_notice",nounce:t,key:a}})}getDisabledWidget(){jQuery.ajax({url:gcfe_localize.ajaxurl,type:"GET",data:{action:"graphina_get_disabled_widgets"},success:function(e){document.querySelectorAll(".graphina-apex-toggle").forEach(a=>{const t=JSON.parse(a.getAttribute("data-widget"));if(e.data.includes(t[0])){const i=a.querySelector('input[type="checkbox"]');i&&(i.checked=!1)}}),jQuery(".graphina-admin-loader").hide(),jQuery("#graphina-apex-chart").show(),jQuery("#graphina-google-chart").show(),jQuery("#graphina-table").show(),gcfe_localize.pro_active=="0"&&jQuery("#graphina-pro-elements").show()}})}handleDisableChart(e){e.preventDefault();var a="graphina_save_enabled_widgets";jQuery(e.currentTarget).find("input").prop("checked")?jQuery(e.currentTarget).find("input").prop("checked",!0):(a="graphina_save_disabled_widgets",jQuery(e.currentTarget).find("input").prop("checked",!1)),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:{action:a,widgets:JSON.stringify(jQuery(e.currentTarget).data("widget"))},success:function(r){alert(r.data.message+`
`+r.data.subMessage)}})}handleEnableAllChart(e){e.preventDefault(),jQuery(".toggle input").prop("checked",!0),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:{action:"graphina_save_enabled_widgets",widgets:1},success:function(a){alert(a.data.message+`
`+a.data.subMessage)}})}handleDisableAllChart(e){e.preventDefault(),jQuery(".toggle input").prop("checked",!1),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:{action:"graphina_save_disabled_widgets",widgets:1},success:function(a){alert(a.data.message+`
`+a.data.subMessage)}})}handleChartTypeSwitch(e){e.preventDefault();const a=jQuery(e.currentTarget);jQuery(".graphina-chart-type").removeClass("active"),a.addClass("active")}handleDatabaseDelete(e){e.preventDefault();let t=jQuery(e.currentTarget).attr("data-selected");confirm(gcfe_localize.i18n.swal_are_you_sure_text+`
`+gcfe_localize.i18n.swal_revert_this_text)&&jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:{action:"graphina_external_database",type:"delete",value:t,nonce:gcfe_localize.nonce},success:function(i){i.status===!0||i.status==="true"?window.location.reload():alert(i.message)}})}handleDatabaseTest(e){e.preventDefault(),jQuery(document).find("#graphina_external_database_action_type").val("con_test"),jQuery(e.currentTarget).text("Connecting..."),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:jQuery("#graphina-settings-db-tab").serialize(),success:function(a){jQuery(e.currentTarget).text("Test DB Setting "),alert(a.message+`
`+a.subMessage),window.location.reload()}})}handleDatabaseSave(e){e.preventDefault(),jQuery(document).find("#graphina_external_database_action_type").val()=="con_test"&&jQuery(document).find("#graphina_external_database_action_type").val("save"),jQuery(e.currentTarget).text("Connecting..."),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:jQuery("#graphina-settings-db-tab").serialize(),success:function(a){jQuery(e.currentTarget).text("Save Setting"),alert(a.message+`
`+a.subMessage),window.location.reload()}})}handleLoaderUpload(e){e.preventDefault();const a=wp.media({title:"Select or Upload Media",button:{text:"Use this media"},multiple:!1});a.on("select",()=>{const t=a.state().get("selection").first().toJSON();jQuery("#graphina_loader_hidden").val(t.url),jQuery(".graphina_upload_image_preview").attr("src",t.url)}),a.open()}handleLoaderDisplay(e){e.preventDefault();const a=jQuery(e.currentTarget).is(":checked");jQuery("#chart_filter_div").toggleClass("graphina-d-none",!a)}handleSettingSave(e){e.preventDefault(),jQuery.ajax({url:gcfe_localize.ajaxurl,type:"POST",data:jQuery("#graphina_settings_tab").serialize(),success:function(a){a.status===!0||a.status==="true"?alert(a.message+`
`+a.subMessage):alert(a.message)}})}}jQuery(function(){const n={Graphina_Admin_Dashboard:new d};window.GraphinaModule=n});
//# sourceMappingURL=adminMain-CfrBwuMe.js.map
